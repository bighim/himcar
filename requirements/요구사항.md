# 개요

라즈베리파이 자동차를 사용해서 차선 추출 및 조향 알고리즘 구현하는것이 목표

# 차량 크기

- 차의 세로길이는 20cm
- 차의 가로길이는 15cm

  - 카메라가 보이는 차선은 차의 중심으로부터 30cm 앞의 차선

- 즉, 보이는 위치부터 안보이는 위치 아래쪽으로 30cm만큼 직선이 있다고 생각하고 조향해야 함
  - 곡선이 있다고 바로 조향하면 안됨

# 사전지식

1. 라즈베리파이 자동차를 사용

   - 10frame으로 처리중, 640x480 이미지 사용
   - 차선 중앙 위치 계산 시 차선 폭은 22cm
   - 카메라가 차량 바로 밑의 차선을 인식하기 어려운 화각임.

2. 직접 만든 자동차 트랙 사용

   - 차선의 각도가 일정하지 않음
   - 차선의 각도가 급격하게 변하는 부분이 있음.
   - 곡선 주행을 하는 경우 오른쪽 차선이 왼쪽으로 넘어가서, sliding window에서 왼쪽 차선으로 처리하는 경우가 있음. 각도를 강하게 조절해야 함.
     - 오른쪽 차선 혹은 왼쪽 차선만 보이는 경우 조향하는 방식을 조정해야 함.
     - 바깥쪽 차선이 아닌, 안쪽 차선에 붙어서 조향하는게 목표

3. Sliding Window에서 x,y 좌표 생성
   - 320x240 이미지의 크기로 변경
4. 2차 polynomial 형태의 left_fit, right_fit 생성(sliding_window.py의 fit_polynomial 함수 리턴값)
   - 왼쪽 차선 혹은 오른쪽 차선이 없는 경우도 있음.
   - 그래서 left_fit, right_fit이 None인 경우도 있음.

# 요구사항

1. 차량 조향 알고리즘 구현

   - left_fit, right_fit을 이용하여 차선 중앙 위치 계산
   - 차선 중앙 위치와 차량 중앙 위치의 오차 계산
   - 오차를 바탕으로 조향 각도 계산
   - 조향 각도를 바탕으로 차량 조향
   - right_fit만 있는 경우 왼쪽 차선 중앙 위치 계산
   - left_fit만 있는 경우 오른쪽 차선 중앙 위치 계산
   - 두 차선 모두 안보이는 경우 이전 조향 각도 유지

2. 차량 조향 알고리즘 이미지에 표시
   - 차선 중앙 위치 표시
   - 차량 중앙 위치 표시
   - 조향 각도 화살표 및 숫자로 표시
